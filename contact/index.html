<!DOCTYPE html>
<html lang="en-US">
<head>
    <!-- [Keep all existing head content unchanged until the contact form section] -->
</head>
<body>
    <!-- [Keep all header and navigation content unchanged] -->

    <!-- Updated Contact Form Section -->
    <div class="contact-form">
        <h2>Send a Message</h2>
        <div id="form-status" class="status-message"></div>
        <form id="contactForm" action="https://formspree.io/f/juan.gomezcruces@hpi.de" method="POST">
            <div class="form-group">
                <label for="name" class="form-label">Your Name</label>
                <input type="text" id="name" name="name" class="form-control" required>
            </div>
            
            <div class="form-group">
                <label for="email" class="form-label">Email Address</label>
                <input type="email" id="email" name="email" class="form-control" required
                       pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                       title="Please enter a valid email address">
                <div id="email-error" class="error-message">Please enter a valid email address</div>
            </div>
            
            <div class="form-group">
                <label for="subject" class="form-label">Subject</label>
                <input type="text" id="subject" name="subject" class="form-control" required>
            </div>
            
            <div class="form-group">
                <label for="message" class="form-label">Message</label>
                <textarea id="message" name="message" class="form-control" required></textarea>
            </div>
            
            <!-- Add hidden _replyto field for better email handling -->
            <input type="hidden" name="_replyto" id="hidden-email">
            
            <button type="submit" class="btn btn-block">Send Message</button>
        </form>
    </div>

    <!-- [Keep all footer content unchanged] -->

    <script>
        // [Keep all existing JavaScript except replace the form handler with this:]

        // Set hidden email field before submission
        document.getElementById('contactForm').addEventListener('submit', function() {
            document.getElementById('hidden-email').value = document.getElementById('email').value;
        });

        // Formspree will handle the submission and response automatically
        // You can add this to track successful submissions:
        window.addEventListener('DOMContentLoaded', function() {
            var form = document.getElementById('contactForm');
            form.addEventListener('submit', function(event) {
                event.preventDefault();
                var status = document.getElementById('form-status');
                fetch(form.action, {
                    method: 'POST',
                    body: new FormData(form),
                    headers: {
                        'Accept': 'application/json'
                    }
                }).then(response => {
                    status.textContent = "Thanks for your submission!";
                    status.className = "status-message success";
                    form.reset();
                }).catch(error => {
                    status.textContent = "Oops! There was a problem submitting your form";
                    status.className = "status-message error";
                });
            });
        });
    </script>
</body>
</html>
